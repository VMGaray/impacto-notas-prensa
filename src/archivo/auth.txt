Especificaciones de AutenticaciÃ³n 
Para: Rodrigo, Victoria, Pedro
De: Enrique FÃ¡rez
Fecha: 19 de noviembre de 2025
________________________________________
La decisiÃ³n: Permitir probar ANTES de registrarse
Por quÃ© funciona mejor
Datos reales de productos similares:
â€¢	Login obligatorio al inicio: 5% se registran
â€¢	Probar gratis primero + registro despuÃ©s: 20-25% se registran
â€¢	Es 4-5 veces mÃ¡s efectivo
Ejemplos que lo hacen:
â€¢	Grammarly: Escribes sin registro, luego te pide cuenta
â€¢	Canva: Creas diseÃ±o sin registro, luego te pide cuenta para guardar
â€¢	Spotify: Escuchas sin registro, luego te pide cuenta para playlists
Por quÃ© funciona: El usuario primero ve que la herramienta SÃ funciona y le sirve. Entonces registrarse es natural, no una barrera.
________________________________________
CÃ³mo funciona paso a paso
1. Usuario llega al landing
   â†“
2. Hace su PRIMERA consulta SIN registrarse
   â†“
3. Ve los resultados completos
   â†“
4. Si quiere hacer SEGUNDA consulta â†’ Le pedimos registro
   â†“
5. Con cuenta Free: 3 consultas al dÃ­a
   â†“
6. Uso continuo â†’ Ofrecemos plan Pro
________________________________________
Textos exactos para la interfaz
Landing page (primera visita)
Â¿FuncionÃ³ mi nota de prensa?

Analiza GRATIS el impacto de tu Ãºltima nota de prensa 
en radio y televisiÃ³n canaria.

Sin registro. Sin tarjeta.

[Campos para organizaciÃ³n, tema, fecha]

[BotÃ³n: Analizar mi nota de prensa]

Texto pequeÃ±o: "Primera consulta gratuita â€¢ Sin registro necesario"
DespuÃ©s de la primera consulta
Mostrar los resultados completos + este banner arriba (no popup que bloquee):
âœ¨ Te quedan 0 consultas gratuitas hoy

Crea cuenta gratis para:
- 3 anÃ¡lisis diarios
- Historial de anÃ¡lisis
- Comparativas

[Crear cuenta - 30 segundos] [Ver planes Pro]
Al intentar segunda consulta (popup centrado)
Â¡Vemos que te gusta! ðŸŽ‰

Crea tu cuenta gratuita para:

âœ… 3 anÃ¡lisis diarios (vs 1 sin cuenta)
âœ… Historial de todas tus consultas
âœ… Comparar resultados entre fechas

[Continuar con Google] â† Recomendado
[Crear con email]

Solo 30 segundos. Sin tarjeta de crÃ©dito.
________________________________________
ProtecciÃ³n contra abuso (para Pedro)
Sistema de lÃ­mites sin registro
Usamos "fingerprinting" del navegador:
â€¢	Identifica visitante Ãºnico sin cookies
â€¢	Permite 1 consulta cada 24 horas
â€¢	Si intenta segunda consulta: mensaje de registro
LibrerÃ­a a usar:
bash
npm install @fingerprintjs/fingerprintjs
CÃ³digo bÃ¡sico:
javascript
import FingerprintJS from '@fingerprintjs/fingerprintjs'

const getVisitorId = async () => {
  const fp = await FingerprintJS.load()
  const result = await fp.get()
  return result.visitorId
}
Tabla en Supabase
sql
CREATE TABLE visitors_queries (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  fingerprint VARCHAR(64) NOT NULL,
  ip_address VARCHAR(45) NOT NULL,
  query_count INT DEFAULT 1,
  last_query_at TIMESTAMP DEFAULT NOW(),
  expires_at TIMESTAMP DEFAULT NOW() + INTERVAL '24 hours'
);

-- Limpiar registros antiguos cada hora
DELETE FROM visitors_queries WHERE expires_at < NOW();
```

### LÃ³gica en n8n
```
[Consulta recibida]
    â†“
[Â¿Usuario tiene sesiÃ³n?]
    â”‚
    â”œâ”€ SÃ â†’ [Verificar lÃ­mite segÃºn plan]
    â”‚        â””â”€ Free: 3/dÃ­a
    â”‚        â””â”€ Pro: ilimitado
    â”‚
    â””â”€ NO â†’ [Verificar fingerprint en tabla]
             â”œâ”€ Primera vez hoy â†’ [Permitir + guardar]
             â””â”€ Ya consultÃ³ hoy â†’ [Mostrar modal registro]
Resumen para implementar
âœ… Hacer:
1.	Permitir primera consulta sin registro
2.	Pedir registro al intentar segunda
3.	Login con Google (mÃ¡s rÃ¡pido)
4.	3 consultas/dÃ­a para Free
5.	Texto de transparencia en respuestas
âŒ No hacer:
1.	Login obligatorio al inicio
2.	Popup que bloquee resultados
3.	LÃ­mites muy restrictivos en Free

